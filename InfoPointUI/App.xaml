<Application x:Class="InfoPointUI.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:InfoPointUI.Converters"
             xmlns:controls="clr-namespace:InfoPointUI.Controls"
             ShutdownMode="OnMainWindowClose">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/ImageUris.xaml" />
                <ResourceDictionary Source="Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>


            <!-- 🔧 Convertoare -->
        <converters:CategoryStyleSelector x:Key="CategoryStyleSelector"/>
        <converters:CurrencyConverter x:Key="CurrencyConverter"/>
        <converters:ImageUrlFallbackConverter x:Key="ImageUrlFallbackConverter"/>
        <converters:BottomBarTextConverter x:Key="BottomBarTextConverter"/>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <converters:StringToVisibilityConverter x:Key="StringToVisibilityConverter"/>

        <!-- 🎨 Paletă Dr.Max -->
        <SolidColorBrush x:Key="DrMaxRed">#E30613</SolidColorBrush>
        <SolidColorBrush x:Key="DrMaxDark">#B0000F</SolidColorBrush>
        <SolidColorBrush x:Key="DrMaxText">#333333</SolidColorBrush>
        <SolidColorBrush x:Key="PharmacyGreen">#28A745</SolidColorBrush>
        <SolidColorBrush x:Key="PharmacyGreenSoft">#F4FFF4</SolidColorBrush>

        <!-- Fonts -->
        <FontFamily x:Key="BahnschriftFont">Bahnschrift</FontFamily>

            <!-- ✨ Umbre pentru tile-uri -->
        <DropShadowEffect x:Key="TileShadow"
                          BlurRadius="6"
                          ShadowDepth="1"
                          Color="#44000000" />

        <!-- 🔍 SearchBox -->
        <Style x:Key="SearchBoxStyle" TargetType="TextBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <!-- Fundal -->
                            <Border CornerRadius="12"
                            Background="#FFF5F6F7"
                            BorderBrush="#88000000"
                            BorderThickness="1" />

                            <!-- Masca pentru umbră -->
                            <Border CornerRadius="12"
                            Background="Transparent"
                            IsHitTestVisible="False">
                                <Border.OpacityMask>
                                    <VisualBrush Stretch="Fill">
                                        <VisualBrush.Visual>
                                            <Border CornerRadius="12" Background="Black" />
                                        </VisualBrush.Visual>
                                    </VisualBrush>
                                </Border.OpacityMask>

                                <!-- Umbre -->
                                <Grid Margin="1" IsHitTestVisible="False">
                                    <Rectangle VerticalAlignment="Top" Height="10">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#26000000" Offset="0" />
                                                <GradientStop Color="#00000000" Offset="1" />
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                    <Rectangle HorizontalAlignment="Left" Width="10">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Color="#26000000" Offset="0" />
                                                <GradientStop Color="#00000000" Offset="1" />
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                    <Rectangle VerticalAlignment="Bottom" Height="10">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint="0,1" EndPoint="0,0">
                                                <GradientStop Color="#18FFFFFF" Offset="0" />
                                                <GradientStop Color="#00FFFFFF" Offset="1" />
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                    <Rectangle HorizontalAlignment="Right" Width="10">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                                                <GradientStop Color="#18FFFFFF" Offset="0" />
                                                <GradientStop Color="#00FFFFFF" Offset="1" />
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                </Grid>
                            </Border>

                            <!-- Conținutul -->
                            <Grid>
                                <!-- Icon -->
                                <TextBlock Text="🔎"
                                   FontSize="18"
                                   Foreground="#7A7A7A"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Right"
                                   Margin="0,0,14,0"
                                   IsHitTestVisible="False" />

                                <!-- Watermark -->
                                <TextBlock Text="{TemplateBinding Tag}"
                                   Foreground="#7A8A94"
                                   Margin="14,0,44,0"
                                   VerticalAlignment="Center"
                                   IsHitTestVisible="False">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource TemplatedParent}}" Value="">
                                                    <Setter Property="Visibility" Value="Visible" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>

                                <!-- TextBox content -->
                                <ScrollViewer x:Name="PART_ContentHost"
                                      Margin="12,8,42,8"
                                      VerticalAlignment="Center"
                                      Focusable="False" />
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="#222" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="CaretBrush" Value="#20AA55" />
        </Style>

        <!-- 🟩 Butoane categorie -->
            <Style x:Key="CategoryButtonStyle" TargetType="controls:TouchButton">
                <Setter Property="Width" Value="145"/>
                <Setter Property="Height" Value="48"/>
                <Setter Property="Margin" Value="0,0,10,0"/>
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="FontFamily" Value="{StaticResource BahnschriftFont}"/>
                <Setter Property="BorderThickness" Value="2"/>
                <Setter Property="BorderBrush" Value="{StaticResource PharmacyGreen}"/>
                <Setter Property="Background" Value="White"/>
                <Setter Property="Foreground" Value="{StaticResource PharmacyGreen}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="controls:TouchButton">
                            <Border x:Name="border"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="5">
                                <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      Margin="{TemplateBinding Padding}"
                                      RecognizesAccessKey="True"
                                      Content="{TemplateBinding Content}"
                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                      ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                      TextElement.Foreground="{TemplateBinding Foreground}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!-- Hover -->
                                <Trigger Property="IsMouseOver" Value="True">
                                    <!--<Setter TargetName="border" Property="Background" Value="{StaticResource PharmacyGreenSoft}"/>-->
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource DrMaxRed}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>

                                <!-- Mouse Down -->
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource DrMaxRed}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>

                                <!-- Disabled -->
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="border" Property="Background" Value="#FFE0E0E0"/>
                                    <Setter TargetName="border" Property="BorderBrush" Value="#FFAAAAAA"/>
                                    <Setter Property="Foreground" Value="#FF888888"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- 🔴 Buton categorie selectată -->
        <Style x:Key="CategoryButtonSelectedStyle"
               BasedOn="{StaticResource CategoryButtonStyle}" TargetType="controls:TouchButton">
            <Setter Property="Background" Value="{StaticResource DrMaxRed}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style x:Key="TouchCategoryButtonStyle" 
           TargetType="controls:TouchButton" 
           BasedOn="{StaticResource CategoryButtonStyle}"/>

        </ResourceDictionary>
    </Application.Resources>
</Application>
